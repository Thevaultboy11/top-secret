---
import { SITE } from "~/config.mjs";
import Layout from "~/layouts/PageLayout.astro";
import { Picture } from "@astrojs/image/components";

const meta = {
  title: SITE.title,
  description: SITE.description,
  dontUseTitleTemplate: true,
};
---

<Layout {meta}>
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6">
    <div class="pt-0 md:pt-[76px] pointer-events-none"></div>
    <div class="py-4 md:py-8">
      <div class="text-center max-w-screen-lg mx-auto">
        <p class="info-title text-xs md:text-xl max-w-xl mx-auto">
          What is the price for security?
        </p>
        <h1
          class="cover-title text-ibm-black text-5xl md:text-7xl font-bold leading-tighter tracking-tighter mb-4 font-heading"
        >
          Security assement <span class="text-primary">price</span> calcualtor.
        </h1>
        <p
          class="text-ibm-black text-base break-line text-center leading-tight max-w-lg mx-auto"
        >
          Do you think the price is a bit off with your ? Calculate the avarage
          costs of security assements Even if you are not a technical person : )
        </p>
        <button
          id="scrollToOptButton"
          class="cta-button-lg mx-auto md:w-72 mt-12"
          >Calculate you expenses</button
        >
      </div>
    </div>
  </div>

  <div
    class="mt-32 max-w-7xl mx-auto flex text-center flex-col justify-center items-center"
  >
    <p class="info-title max-w-md mx-auto">#SecurityRules</p>
    <h2 class="sub-title">What make's a good security scope</h2>
  </div>
  <!-- one rule -->
  <div
    class="grid h-200 grid-cols-1 md:grid-cols-3 gap-8 p-4 w-full max-w-7xl mx-auto"
  >
    <div
      class="flex flex-col items-center justify-center p-4 md:p-8 md:px-16 bg-paper rounded-xl text-center"
    >
      <Picture
        src={"/images/softwear/card-softwear1.png"}
        class="rounded-xl"
        width={300}
        height={300}
        widths={[400, 768]}
        sizes="100vw, 432px"
        aspectRatio="300:300"
        alt="sa"
      />
      <h3 class="text-xl font-bold leading-tight sm:text-2xl font-heading">
        <a class="transition ease-in duration-200 uppercase"
          >Solving the confusing calculations
        </a>
      </h3>
      <p class="text-muted text-lg">
        No need to strain your brain over prices anymore; no more confusing
        calculations for penetration test pricing. Simply provide us with the
        data, and we give you the price.
      </p>
    </div>
    <div class="p-4 md:p-8 md:px-16 bg-paper rounded-xl text-center">
      <Picture
        src={"/images/softwear/card-softwear2.png"}
        class="rounded-xl"
        width={300}
        height={300}
        widths={[400, 768]}
        sizes="100vw, 432px"
        aspectRatio="300:300"
        alt="sa"
      />
      <h3 class="text-xl font-bold leading-tight sm:text-2xl font-heading">
        <a class="transition ease-in duration-200 uppercase">
          Expanding your free time</a
        >
      </h3>
      <p class="text-muted text-lg">
        Save time with our calculator, rather than hunting for the right price
        for a penetration test. Just enter the data, and within 1 hour, it's all
        taken care of.
      </p>
    </div>
    <div
      class="flex flex-col items-center justify-center p-4 md:p-8 md:px-16 bg-paper rounded-xl text-center"
    >
      <Picture
        src={"/images/softwear/card-softwear3.png"}
        class="rounded-xl"
        width={300}
        height={300}
        widths={[400, 768]}
        sizes="100vw, 432px"
        aspectRatio="300:300"
        alt="sa"
      />
      <h3 class="text-xl font-bold leading-tight sm:text-2xl font-heading">
        <a class="transition ease-in duration-200 uppercase"
          >Solving the confusing calculations
        </a>
      </h3>
      <p class="text-muted text-lg">
        No need to strain your brain over prices anymore; no more confusing
        calculations for penetration test pricing. Simply provide us with the
        data, and we give you the price.
      </p>
    </div>
    <div
      class="col-span-1 md:col-span-3 w-full flex justify-center items-center"
    >
      <button class="cta-button-lg mx-auto md:w-72 mt-8" id="scrollToOptButton2"
        >I want to calcualte the price.</button
      >
    </div>
  </div>
  <div
    class="mt-32 relative grid grid-cols-1 md:grid-cols-2 p-4 max-w-5xl mx-auto"
  >
    <div
      class="bg-paper col-span-1 h-200 w-full md:w-max p-4 rounded-xl md:p-8 md:px-16"
    >
      <div
        id="modal"
        class="absolute w-full hidden top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 md:max-w-xl z-50 bg-white rounded-lg shadow dark:bg-gray-700"
      >
        <div
          class="flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600"
        >
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
            Before you go
          </h3>
        </div>
        <!-- Modal body -->
        <div class="p-6 space-y-6">
          <p
            id="modal-content"
            class="text-base leading-relaxed text-gray-500 dark:text-gray-400"
          >
            The software is only to show average prices in the cybersecurity
            market.
            <br />
            <br />
            This should only help you make better decisions and see how the price
            proposed stands in the industry standard.
          </p>
        </div>
        <!-- Modal footer -->
        <div
          class="flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"
        >
          <a
            href="/softwear/assesment-calculator"
            id="close_modal"
            data-modal-hide="staticModal"
            type="button"
            class="text-white bg-primary focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
            >Calculator</a
          >
        </div>
      </div>
      <div
        id="opt-page"
        class="flex flex-col justify-center items-center w-full md:w-96"
      >
        <h1 class="sub-title text-center text-xl md:text-2xl">
          Enter the details so you can have access.
        </h1>
        <form class="flex w-full flex-col gap-y-2" id="contactForm">
          <label for="name">Name</label>
          <input
            placeholder="Name Surname"
            class="rounded-full w-full p-2 md:p-4"
            type="text"
            id="name"
            name="name"
          />

          <label for="email">Email</label>
          <input
            placeholder="example@buisnessemail.com"
            class="rounded-full w-full p-2 md:p-4"
            type="email"
            id="email"
            name="email"
          />

          <label for="phone">Phone Number</label>
          <input
            class="rounded-full w-full p-2 md:p-4"
            type="text"
            id="phone"
            name="phone"
            placeholder="(123-45-678)"
          />

          <button
            type="submit"
            class="shadow-none cta-button-lg mx-auto md:w-72 my-4"
            >Calculate your expenses</button
          >
        </form>
        <p class="text-xl text-center text-paper">
          P.S. Say goodbye to unfair prices cyber-sec offer.
        </p>
        <p class="text-xs text-center">
          YOUR INFORMATION IS 100% SAFE. WE NEVER SHARE YOUR INFORMATION WITH
          ANYONE. BY CLICKING “SUBMIT” I AGREE TO RECEIVE AUTO AND PRE-MADE
          E-MAILS AT THE E-MAIL PROVIDED. I UNDERSTAND THAT MY CONSENT IS NOT A
          CONDITION TO PURCHASE ANYTHING.
        </p>
      </div>
    </div>
    <div class="relative flex justify-center items-center col-span-1">
      <Picture
        class="bounce-slow select-none md:rotate-12"
        width={600}
        height={400}
        widths={[400, 768]}
        sizes="100vw, 432px"
        aspectRatio="400:300"
        alt="sa"
        src={"/images/softwear/softwear-coverr2.png"}
      />
    </div>
  </div>
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const scrollToOptButton = document.getElementById("scrollToOptButton");
    const scrollToOptButton2 = document.getElementById("scrollToOptButton2");
    const OptSection = document.getElementById("opt-page");

    scrollToOptButton.addEventListener("click", function () {
      // Scroll to the Opt section using smooth behavior
      OptSection.scrollIntoView({ behavior: "smooth" });
    });
    scrollToOptButton2.addEventListener("click", function () {
      // Calculate the target position of the Opt section
      OptSection.scrollIntoView({ behavior: "smooth" });
    });
  });
  //   sending the email
  const form = document.getElementById("contactForm");
  const modal = document.getElementById("modal");
  const close_modal = document.getElementById("close_modal");
  const modal_backdrop = document.getElementById("modal-backdrop");
  const modal_content = document.getElementById("modal-content");

  close_modal.addEventListener("click", async (event) => {
    modal.classList.toggle("hidden");
    modal_backdrop.classList.add("hidden");
    document.body.style.overflow = "";
  });

  form.addEventListener("submit", async (event) => {
    event.preventDefault();
    const nameInput = form.querySelector("#name").value;
    const emailInput = form.querySelector("#email").value;
    const phoneInput = form.querySelector("#phone").value;
    const apiUrl = "http://localhost:8080/api";
    const data = {
      fullName: String(nameInput),
      email: String(emailInput),
      phoneNumber: String(phoneInput),
    };

    try {
      const response = await fetch(`${apiUrl}/create-member`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(data),
      });

      if (response.status === 200) {
        modal.classList.toggle("hidden");
        modal_backdrop.classList.remove("hidden");
        document.body.style.overflow = "hidden";
      } else {
        close_modal?.classList.toggle("hidden");
        modal.classList.toggle("hidden");
        modal_backdrop.classList.remove("hidden");
        document.body.style.overflow = "hidden";
        modal_content.innerHTML = `
        Something went wrong while loading the application. Try reloading the site to fix the problem.<br/><br/>
        If that does not help please contact us at <a class='text-primary' href='mailto:info@starshipshield.com'>info@starshipshield.com</a>.
      `;
      }
    } catch (error) {
      console.error("Error:", error);
    }
  });
</script>
